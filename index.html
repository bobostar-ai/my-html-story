<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>GitHub 파일 목록 자동 생성</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    ul { list-style-type: none; padding: 0; }
    li { margin-bottom: 10px; }
    a { color: #0366d6; text-decoration: none; font-weight: bold; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>업로드한 파일 목록</h1>
  <ul id="fileList">로딩 중...</ul>

  <script>
    const username = 'bobostar-ai';       // GitHub 사용자명 또는 조직명
    const repo = 'my-html-story';           // 파일이 올라간 리포지토리명
    const branch = 'main';               // 브랜치명 (보통 main)

    async function fetchFiles() {
      const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/?ref=${branch}`;
      const ul = document.getElementById('fileList');
      ul.innerHTML = '';

      try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error('API 호출 실패');
        const files = await response.json();

        let count = 1;
        files.forEach(file => {
  if(file.type === 'file' && file.name.endsWith('.html')) {
    const li = document.createElement('li');
    const a = document.createElement('a');
    // GitHub Pages용 경로로 변경
    a.href = `https://bobostar-ai.github.io/my-html-story/${file.name}`;
    a.textContent = `${count}. ${file.name}`;
    a.target = "_blank";
    li.appendChild(a);
    ul.appendChild(li);
    count++;
  }
});

        if (ul.children.length === 0) ul.innerHTML = '파일이 없습니다.';
      } catch (error) {
        ul.innerHTML = '파일 목록을 불러오지 못했습니다.';
        console.error(error);
      }
    }

    fetchFiles();
  </script>
</body>
</html>
